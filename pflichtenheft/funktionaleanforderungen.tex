\chapter{Funktionale Anforderungen}
\label{ch:funktionen}

\newcounter{fanr}[chapter]
\setcounter{fanr}{10}
\newcommand{\fano}[1]{\subsubsection{#1}\addtocounter{fanr}{10}}
\newcommand{\subfano}[1]{\subsubsection{#1}\addtocounter{fanr}{1}}
%\renewcommand\thesubsection{/FA\ifnum\value{fanr}<10 00\else\ifnum\value{fanr}<100 0\fi\fi\arabic{fanr}/}
\renewcommand\thesubsubsection{/FA\ifnum\value{fanr}<10 00\else\ifnum\value{fanr}<100 0\fi\fi\arabic{fanr}/}

\section{Muss-Funktionen}
\subsection{\gls{io}}

\fano{Graph aus Datei importieren}\label{fa:import}
\textbf{Ziel:} Der in der Graphdatei beschriebene Graph soll visuell dargestellt werden.\\
\textbf{Vorbedingung:} Der Benutzer hat eine unterstützte Graphdatei (siehe \ref{ch:daten} in seinem Dateissystem, auf welche zugegriffen werden kann.\\
\textbf{Nachbedingung (Erfolg):} Der Graph wird dargestellt.\\
\textbf{Nachbedingung (Fehlschlag):}
Eine Fehlermeldung wird ausgegeben, dass die Datei nicht geöffnet werden konnte, bzw. dass die Datei keinen korrekten Graph beschreibt.\\
\textbf{Auslösende Ereignisse:}
\begin{enumerate}[nolistsep, label=(\alph*)]
  \item Der Benutzer wählt die Import-Funktion über das Menüband aus, nachdem das Programm geöffnet wurde. %TODO: Referenz zu Menüband in GUI
  \item Der Benutzer ruft das Programm auf und übergibt den Pfad zur Graphdatei als Argument. %TODO: Benutzerschnittstelle Kommandozeile
\end{enumerate}
\textbf{Beschreibung:}\\
Menüband (a): Ein Dateiverzeichnis-Menü öffnet sich. %TODO: Dateiverzeichnis-Menü auch in GUI-Entwurf oder klar?
Der Benutzer wählt die zu importierende Datei aus.
Der in der Datei beschriebene Graph wird im Graph-Fenster dargestellt.\\%TODO: % Referenz zur GUI (Graph-Fenster)
Kommandozeilenargument (b): Der Graph wird gleich nach dem Programmstart im Graph-Fenster dargestellt.

\fano{Export als Bilddatei}\label{fa:export_img}
\textbf{Ziel:} Der Graph soll in seiner aktuellen Darstellung als Bilddatei exportiert werden.\\
\textbf{Vorbedingung:} Ein Graph wurde geladen. \\
\textbf{Nachbedingung (Erfolg):} Es wurde eine Bilddatei an einer gewünschten, schreibbaren Stelle im Dateissystem erstellt, welche ein Abbild des derzeit angezeigten Graphens enthält.\\
\textbf{Nachbedingung (Fehlschlag):} Die Bilddatei konnte nicht erstellt werden. Es wird eine Fehlermeldung ausgegeben.\\
\textbf{Auslösendes Ereignis:}
Der Benutzer wählt die Exportfunktion im Menübalken aus.\\
\textbf{Beschreibung:}\\
Der Benutzer wählt die Exportfunktion im Menübalken unter Datei-->Export--><Dateiformat> aus. Wobei <Dateiformat> durch das gewünschte Bilddatei-Format zu ersetzen ist. Unterstützt wird mindestens das \gls{svg}-Format. %TODO: Referenz auf Dateiformate und Erweiterbarkeit durch Plugins
Es erscheint ein Dateisystem-Menü indem, der Pfad zum Abspeichern der Bilddatei ausgewählt werden kann.
Eventuell wird der Benutzer nach weiteren, zur Abspeicherung relevanten, Details abgefagt. (z.B. Stärke der Komprimierung bei JPEG) %TODO: Durch Beispiel in SVG ersetzten
Es wird versucht die Bilddatei am ausgewählten Ort abzuspeichern.\\

\subsection{User Interface}

\fano{Sichtfeld verschieben}\label{fa:verschieben}
\textbf{Ziel:} Das Sichtfeld soll verschoben werden.\\
\textbf{Vorbedingung:} Ein Graph wurde geladen und das Sichtfeld deckt nicht alle Elemente des Graphens ab.\\
\textbf{Nachbedingung (Erfolg):}  Das Sichtfeld deckt nun einen den gewünschten Teil des Graphen ab.\\
\textbf{Nachbedingung (Fehlschlag):} Das Sichtfeld deckt einen Randabschnitt ab und es wurde versucht das Sichtfeld über den Rand hinaus zu bewegen.\\
Das Sichtfeld wird nicht über den Rand bewegt. Es wird keine Fehlermeldung ausgegeben.\\
\textbf{Auslösende Ereignisse:}
\begin{enumerate}[nolistsep, label=(\alph*)]
  \item Der Benutzer klickt und zieht mit der mittleren Maustaste in einem leeren Bereich des Graph-Fenster.
  \item Der Benutzer betätigt eine der zum Verschieben des Sichtfeldes designierten Tasten (siehe FAXXXX). %TODO: Referenz auf Tasten Auswahl funktion
  \item Der Benutzer bewegt die Scroll-Balken am Rand des Sichtfeldes. % TODO: Referenzt auf GUI Entwurf, wo scrollbalken sichtbar sind
\end{enumerate}
\textbf{Beschreibung:}\\
Klicken und Ziehen (a): Das Sichtfeld bewegt sich entgegen der Richtung, in welche der Mauszeiger bewegt wird. Es entsteht somit ein intuitives Verschieben des Graphens.\\
Navigationstasten (b): Das Sichtfeld verschiebt sich um eine feste Länge (in Abhängigkeit des Zoom-Grades) in die entsprechnde Richtung.\\
Scroll-Balken (c): Das Sichtfeld bewegt sich relativ zur Größe des gesamten Graphen um das gleiche Maß wie der Scroll-Balken zur Länge seiner Fahrbahn in die entsprechende Richtung (Horizontal/Vertikal).\\

\fano{Zoom-Grad ändern}\label{fa:zoom}
\textbf{Ziel:} Der Zoom-Grad des Sichtfeldes soll vergrößert bzw. verkleinert werden.\\
\textbf{Vorbedingung:} Ein Graph wurde geladen.\\
\textbf{Nachbedingung (Erfolg):} Der Zoom-Grad wurde angepasst.\\
\textbf{Nachbedingung (Fehlschlag):} Der Zoom-Grad bleibt gleich, falls ein Maximum/Minimum erreicht wurde. Es wird keine Fehlermeldung ausgegeben.\\
\textbf{Auslösende Ereignisse:}
\begin{enumerate}[nolistsep, label=(\alph*)]
  \item Der Benutzer dreht am Mausrad.
  \item Der Benutzer betätigt die zum Zoomen designierten Tasten. (siehe FAXXXX). %TODO: Referenz auf Tasten Auswahl funktion
\end{enumerate}
\textbf{Beschreibung:}\\
Mausrad (a): Der Zoom-Grad ändert sich mit dem Drehen des Mausrades. Die Änderungsrichtung kann sich in Abhängigkeit vom Betriebssystem ändern.\\
Zoom-Tasten (b): Der Zoom-Grad ändert sich um einen in Abhängigkeit zum derzeitigen Zoom-Grad festen Wert.\\

\fano{Knoten selektieren}\label{fa:selekt_knoten}
\textbf{Ziel:} Ein oder mehrere Knoten sollen der Auswahl hinzugefügt werden.\\
\textbf{Vorbedingung:} Ein Graph wurde geladen.\\
\textbf{Nachbedingung (Erfolg):} Ein oder mehrere Knoten wurden der Auswahl hinzugefügt.\\
\textbf{Nachbedingung (Fehlschlag):} -\\
\textbf{Auslösende Ereignisse:}
\begin{enumerate}[nolistsep, label=(\alph*)]
  \item Der Benutzer klickt mit der linken Maustaste auf einen Knoten.
  \item Der Benutzer klickt mit der linken Maustaste in einen leeren Bereich des Sichtfeldes und zieht den Mauszeiger.
\end{enumerate}
\textbf{Beschreibung:}\\
Der Benutzer kann Knoten mit der Maus zur Auswahl hinzufügen.
Auf eine Auswahl von Knoten können verschiedene Funktionen ausgeführt werden. %TODO: Referenz auf Funktionen auf Knotenmengen/Teilgraphen
Die derzeit ausgewählten Knoten werden graphisch hervorgehoben.\\
%\begin{itemize}
%    \item Falls während der Auswahl die Shift-Taste gedrückt gehalten wird, werden die Knoten einer evtl. schon vorhandenen Auswahl hinzugefügt.
%    \item Falls während der Auswahl die Strg-Taste gedrückt gehalten wird, werden die Knoten, falls in sie schon ausgewählt sind, von der Auswahl entfernt.
%    \item Falls keine der beiden Tasten gedrückt gehalten wird, werden nur diese Knoten ausgewählt. Zuvor ausgewählte Knoten sind nun nicht mehr in der Auswahl.
%\end{itemize}
%Klick (a): Der Knoten wird der Auswahl hinzugefügt.
%Auswahlbereich (b): Es wird ein Rechteck um die Auswahl gezeichnet. Wenn die linke Maustaste losgelassen wird, werden alle im Rechteck enthaltenen Knoten der Auswahl hinzugefügt.

\fano{Knoten und Kanten filtern}\label{fa:filter}
\textbf{Ziel:} Knoten und Kanten können bezüglich ihres Types gefiltert werden.\\
\textbf{Vorbedingung:} Ein Graph wurde geladen.\\
\textbf{Nachbedingung (Erfolg):} Es wurden Knoten und Kanten eines bestimmten Types ein-/ausgeblendet.\\
\textbf{Nachbedingung (Fehlschlag):} -\\
\textbf{Auslösende Ereignisse:}
Der Benutzer wählt die Filter-Funktion aus dem Menüband aus.\\
\textbf{Beschreibung:}
Der Benutzer kann aus einer Reihe von Filtern auswählen.
Mitgeliefert werden über das JOANA-Plugin folgende Filter: % Referenz Plugin
\begin{itemize}[nolistsep]
  \item Kontrollfluss
  \item Kontrollabhängigkeit
  \item Datenabhängigkeit
  \item Heap-Abhängigkeiten
  \item Parameterstruktur
  \item Threadinterferenzen
\end{itemize}
Die Kanten werden entsprechend aus- oder eingeblendet.\\
\textbf{Alternative:}
Der Graph wird neugezeichnet um kompakter zu werden oder um Platz für neue Kanten zu machen.

\subsection{JOANA}

%\fano{<++>}\label{fa:<++>}
%\textbf{Ziel:} <++>\\
%\textbf{Kategorie:} <++>\\
%\textbf{Vorbedingung:} <++>\\
%\textbf{Nachbedingung (Erfolg):} <++>\\
%\textbf{Nachbedingung (Fehlschlag):} <++>\\
%\textbf{Auslösende Ereignisse:}
%\begin{enumerate}[nolistsep, label=(\alph*)]
%  \item <++>
%\end{enumerate}
%\textbf{Beschreibung:}
%\begin{enumerate}[nolistsep]
%  \item <++>
%\end{enumerate}
%\textbf{Alternativen:}
%\begin{enumerate}[nolistsep]
%  \item <++>
%\end{enumerate}
