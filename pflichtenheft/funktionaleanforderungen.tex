\chapter{Funktionale Anforderungen}
\label{ch:funktionen}


\setcounter{fanr}{10}
\newcommand{\fano}[1]{\subsubsection{#1}\addtocounter{fanr}{10}}
\newcommand{\subfano}[1]{\subsubsection{#1}\addtocounter{fanr}{1}}
\renewcommand\thesubsubsection{/FA\ifnum\value{fanr}<10 00\else\ifnum\value{fanr}<100 0\fi\fi\arabic{fanr}/}

\section{Graph von Ansicht}

\subsection{Allgemein}

\fano{Anzeige von Graphen}\label{fa:graphen}
\textbf{Ziel:} Ein Graph soll in der Graphansicht angezeigt werden.\\
\textbf{Vorbedingung:} -\\
\textbf{Nachbedingung (Erfolg):} Der Graph ist in der Graphansicht sichtbar.\\
\textbf{Nachbedingung (Fehlschlag):} -\\
\textbf{Auslösende Ereignisse:}
\begin{enumerate}[nolistsep, label=(\alph*)]
  \item Eine Graphdatei wird importiert.
  \item Ein Graph wird aus der Struckturansicht ausgewählt.
\end{enumerate}
\textbf{Beschreibung:}\\
Importieren (a): Der in der Graphdatei zuerst beschriebene Graph, wird in der Graphansicht angezeigt.\\
Auswahl (b): Der ausgewählte Graph in der Graphansicht angezeigt.


\fano{Anzeige von geschachtelten Graphen}\label{fa:hierarchgraph}
\textbf{Ziel:} Falls ein Graph einen geschachtelten Graphen enthält, soll dieser angezeigt werden.\\
\textbf{Vorbedingung:} Eine Graphdatei mit geschachtelten Graphen wurde importiert.\\
\textbf{Nachbedingung (Erfolg):} Der geschachtelte Graph wird in der Graphansicht angezeigt.\\
\textbf{Nachbedingung (Fehlschlag):} -\\
\textbf{Auslösende Ereignisse:}
\begin{enumerate}[nolistsep, label=(\alph*)]
  \item Der Benutzer wählt den geschachtelten Graphen aus der Struckturansicht aus.
  \item Ein Graph mit einem geschachtelten Graphen wird in der Graphansicht angezeigt.
    Der Benutzer wählt die Funktion über das Kontextmenü des Knotens, der den geschachtelten Graphen enthält, aus oder löst sie durch ein Tastenkürzel aus.
\end{enumerate}
\textbf{Beschreibung:}\\
Geschachtelte Graphen werden in der Graphansicht als Knoten dargestellt.
Wenn der Benutzer einer der Ereignisse auslöst wird der Graph in der Graphansicht angezeigt.
Ein geschachtelter Graph wird in der Struckturansicht als Kind des Graphen dargestellt, der in enthält. Für ein Beispiel siehe hier:\\ %TODO: Referenz von GUI Bild mit Struckturansicht
Ein geschachtelter Graph wird in der Graphansicht wie ein ``Top-Level-''Graph behandelt.


\fano{Graphen layouten}\label{fa:layout}
\textbf{Ziel:} Ein Graph soll nach bestimmten Vorgaben bzw. einem bestimmten Muster angeordnet werden.\\
\textbf{Vorbedingung:} Ein Graph wurde in die Graphansicht geladen.\\
\textbf{Nachbedingung (Erfolg):} Allen Knoten wurden bestimmte Positionen zugeordnet. Kanten wurden feste Züge zugewiesen.\\
\textbf{Nachbedingung (Fehlschlag):} -\\
\textbf{Auslösende Ereignisse:}
Der Benutzer wählt über die Menüleiste ein Layout aus.\\
\textbf{Beschreibung:}\\
Nach der Auswahl wird das Layout berechnet. Hierbei kann es zu Verzögerungen kommen. (siehe \ref{nfa:berechzeit})
Nach der Berechnung wird der Graph neugezeichnet. Layouts sind nicht in Graph von Ansicht enthalten und können durch Plugins hinzugefügt werden.
Dem Produkt werden über das JOANA-Plugin Layout zur Darstellung von, von \gls{joana} berechneten, SDGs mitgeliefert.
Diese Layouts muss alle Anforderungen beschrieben in \ref{sec:nfajoana} erfüllen.

\subsection{User Interface}
\setcounter{fanr}{100}

\fano{Sichtfeld verschieben}\label{fa:verschieben}
\textbf{Ziel:} Das Sichtfeld soll verschoben werden.\\
\textbf{Vorbedingung:} Ein Graph wurde in die Graphansicht geladen und das Sichtfeld deckt nicht alle Elemente des Graphens ab.\\
\textbf{Nachbedingung (Erfolg):}  Das Sichtfeld deckt nun den gewünschten Teil des Graphen ab.\\
\textbf{Nachbedingung (Fehlschlag):} Das Sichtfeld deckte einen Randabschnitt ab und es wurde versucht das Sichtfeld über den Rand hinaus zu bewegen.\\
Das Sichtfeld wird nicht über den Rand bewegt. Es wird keine Fehlermeldung ausgegeben.\\
\textbf{Auslösende Ereignisse:}
\begin{enumerate}[nolistsep, label=(\alph*)]
  \item Der Benutzer klickt und zieht mit der mittleren Maustaste in einem leeren Bereich des Graph-Fenster.
  \item Der Benutzer betätigt eine der zum Verschieben des Sichtfeldes designierten Tasten \ref{fa:hotkey}
  \item Der Benutzer bewegt die Scroll-Balken am Rand des Sichtfeldes. % TODO: Referenzt auf GUI Entwurf, wo scrollbalken sichtbar sind
\end{enumerate}
\textbf{Beschreibung:}\\
Klicken und Ziehen (a): Das Sichtfeld bewegt sich entgegen der Richtung, in welche der Mauszeiger bewegt wird. Es entsteht somit ein intuitives Verschieben des Graphen.\\
Navigationstasten (b): Das Sichtfeld verschiebt sich um eine feste Länge (in Abhängigkeit des Zoom-Grades) in die entsprechnde Richtung.\\
Scroll-Balken (c): Das Sichtfeld bewegt sich relativ zur Größe des gesamten Graphen um das gleiche Maß wie der Scroll-Balken zur Länge seiner Fahrbahn in die entsprechende Richtung (Horizontal/Vertikal).\\

\fano{Zoom-Grad ändern}\label{fa:zoom}
\textbf{Ziel:} Der Zoom-Grad des Sichtfeldes soll vergrößert bzw. verkleinert werden.\\
\textbf{Vorbedingung:} Ein Graph wurde geladen in die Graphansicht.\\
\textbf{Nachbedingung (Erfolg):} Der Zoom-Grad wurde angepasst.\\
\textbf{Nachbedingung (Fehlschlag):} Der Zoom-Grad bleibt gleich, falls ein Maximum/Minimum erreicht wurde. Es wird keine Fehlermeldung ausgegeben.\\
\textbf{Auslösende Ereignisse:}
\begin{enumerate}[nolistsep, label=(\alph*)]
  \item Der Benutzer dreht am Mausrad.
  \item Der Benutzer betätigt die zum Zoomen designierten Tasten. \ref{fa:hotkey}
\end{enumerate}
\textbf{Beschreibung:}\\
Mausrad (a): Der Zoom-Grad ändert sich mit dem Drehen des Mausrades. Die Änderungsrichtung kann sich in Abhängigkeit vom Betriebssystem ändern.\\
Zoom-Tasten (b): Der Zoom-Grad ändert sich um einen in Abhängigkeit zum derzeitigen Zoom-Grad festen Wert.\\

\fano{Knoten selektieren}\label{fa:selekt_knoten}
\textbf{Ziel:} Ein oder mehrere Knoten sollen der Auswahl hinzugefügt werden.\\
\textbf{Vorbedingung:} Ein Graph wurde in die Graphansicht geladen.\\
\textbf{Nachbedingung (Erfolg):} Ein oder mehrere Knoten wurden der Auswahl hinzugefügt.\\
\textbf{Nachbedingung (Fehlschlag):} -\\
\textbf{Auslösende Ereignisse:}
\begin{enumerate}[nolistsep, label=(\alph*)]
  \item Der Benutzer klickt mit der linken Maustaste auf einen Knoten.
  \item Der Benutzer klickt mit der linken Maustaste in einen leeren Bereich des Sichtfeldes und zieht den Mauszeiger.
\end{enumerate}
\textbf{Beschreibung:}\\
Der Benutzer kann Knoten mit der Maus zur Auswahl hinzufügen.
Auf eine Auswahl von Knoten können verschiedene Funktionen ausgeführt werden. %TODO: Referenz auf Funktionen auf Knotenmengen/Teilgraphen
Die derzeit ausgewählten Knoten werden graphisch hervorgehoben.\\

\fano{Knoten und Kanten filtern}\label{fa:filter}
\textbf{Ziel:} Knoten und Kanten können bezüglich ihres Types gefiltert werden.\\
\textbf{Vorbedingung:} Ein Graph wurde geladen.\\
\textbf{Nachbedingung (Erfolg):} Es wurden Knoten und Kanten eines bestimmten Types ein-/ausgeblendet.\\
\textbf{Nachbedingung (Fehlschlag):} -\\
\textbf{Auslösende Ereignisse:}
Der Benutzer wählt die Filter-Funktion aus dem Menüleiste aus.\\
\textbf{Beschreibung:}
Der Benutzer kann aus einer Reihe von Filtern auswählen.
Mitgeliefert werden über das JOANA-Plugin folgende Filter: % Referenz Plugin
\begin{itemize}[nolistsep]
  \item Kontrollfluss
  \item Kontrollabhängigkeit
  \item Datenabhängigkeit
  \item Heap-Abhängigkeiten
  \item Parameterstruktur
  \item Threadinterferenzen
\end{itemize}
Die Kanten werden entsprechend aus- oder eingeblendet.\\
\textbf{Alternative:}
Der Graph wird neugezeichnet um kompakter zu werden oder um Platz für neue Kanten zu machen.

\fano{Wechsel zwischen Graphen}\label{fa:graphwechsel}
\textbf{Ziel:} Der in der Graphansicht angezeigte Graph wurde ausgetauscht. \\
\textbf{Vorbedingung:} Eine Graphdatei wurde geladen.\\
\textbf{Nachbedingung (Erfolg):} Der ausgewählte Graph wird in der Graphansicht angzeigt.\\
\textbf{Nachbedingung (Fehlschlag):} -\\
\textbf{Auslösende Ereignisse:}
Der Benutzer wählt über die Graph-Übersicht einen anderen Graphen aus.\\
\textbf{Beschreibung:}
Das Produkt unterstützt Graphdateien, welche mehr als einen Graphen beschreiben.
Mit dieser Funktion kann der Benutzer die Ansicht zwischen den Graphen wechseln.

\fano{Steuerung über Tastaturkürzel}\label{fa:hotkey}
\textbf{Ziel:} Häufig verwendete Funktionen können über Tastaturkürzel ausgeführt werden.\\
\textbf{Vorbedingung:} -\\
\textbf{Nachbedingung (Erfolg):} Die dem Tastaturkürzel zugeordnete Funktion wurde ausgeführt.\\
\textbf{Nachbedingung (Fehlschlag):} -\\
\textbf{Auslösende Ereignisse:}
Ein Benutzer aktiviert ein Tastenkürzel, welchem eine Funktion zugeordnet ist.\\
\textbf{Beschreibung:}
Vom Benutzer ausführbare Funktionen (wie z.B. Navigation im Graphen) und Menüs sind Tastaturkürzel zugeordnet.
Die Tastenkürzel werden hinter dem Funktionsnamen im Menüleiste oder Kontextmenü angezeigt.

\section{\gls{graphml}-Plugin}

\fano{Graph aus Datei importieren}\label{fa:import}
\textbf{Ziel:} Der in der Graphdatei beschriebene Graph soll visuell dargestellt werden.\\
\textbf{Vorbedingung:} Der Benutzer hat eine unterstützte Graphdatei (siehe \ref{ch:daten}) in seinem Dateissystem, auf welche zugegriffen werden kann.\\
\textbf{Nachbedingung (Erfolg):} Der Graph wird dargestellt.\\
\textbf{Nachbedingung (Fehlschlag):}
Eine Fehlermeldung wird ausgegeben, dass die Datei nicht geöffnet werden konnte, bzw. dass die Datei keinen korrekten Graph beschreibt.\\
\textbf{Auslösende Ereignisse:}
\begin{enumerate}[nolistsep, label=(\alph*)]
  \item Der Benutzer wählt die Import-Funktion über das Menüband aus, nachdem das Programm geöffnet wurde. %TODO: Referenz zu Menüband in GUI
  \item Der Benutzer ruft das Programm auf und übergibt den Pfad zur Graphdatei als Argument. %TODO: Benutzerschnittstelle Kommandozeile
\end{enumerate}
\textbf{Beschreibung:}\\
Menüband (a): Ein Dateiverzeichnis-Menü öffnet sich. %TODO: Dateiverzeichnis-Menü auch in GUI-Entwurf oder klar?
Der Benutzer wählt die zu importierende Datei aus.
Der in der Datei beschriebene Graph wird im Graph-Fenster dargestellt.\\%TODO: % Referenz zur GUI (Graph-Fenster)
Kommandozeilenargument (b): Der Graph wird gleich nach dem Programmstart im Graph-Fenster dargestellt.

\section{\gls{svg}-Plugin}

\fano{Export als Bilddatei}\label{fa:export_img}
\textbf{Ziel:} Der Graph soll in seiner aktuellen Darstellung als Bilddatei exportiert werden.\\
\textbf{Vorbedingung:} Ein Graph wurde geladen. \\
\textbf{Nachbedingung (Erfolg):} Es wurde eine Bilddatei an einer gewünschten, schreibbaren Stelle im Dateissystem erstellt, welche ein Abbild des derzeit angezeigten Graphens enthält.\\
\textbf{Nachbedingung (Fehlschlag):} Die Bilddatei konnte nicht erstellt werden. Es wird eine Fehlermeldung ausgegeben.\\
\textbf{Auslösendes Ereignis:}
Der Benutzer wählt die Exportfunktion im Menübalken aus.\\
\textbf{Beschreibung:}\\
Der Benutzer wählt die Exportfunktion im Menübalken unter Datei-->Export--><Dateiformat> aus. Wobei <Dateiformat> durch das gewünschte Bilddatei-Format zu ersetzen ist. Unterstützt wird mindestens das \gls{svg}-Format. %TODO: Referenz auf Dateiformate und Erweiterbarkeit durch Plugins
Es erscheint ein Dateisystem-Menü indem, der Pfad zum Abspeichern der Bilddatei ausgewählt werden kann.
Eventuell wird der Benutzer nach weiteren, zur Abspeicherung relevanten, Details abgefagt. (z.B. Stärke der Komprimierung bei JPEG) %TODO: Durch Beispiel in SVG ersetzten
Es wird versucht die Bilddatei am ausgewählten Ort abzuspeichern.\\

\section{\gls{joana}-Plugin}



%\fano{<++>}\label{fa:<++>}
%\textbf{Ziel:} <++>\\
%\textbf{Kategorie:} <++>\\
%\textbf{Vorbedingung:} <++>\\
%\textbf{Nachbedingung (Erfolg):} <++>\\
%\textbf{Nachbedingung (Fehlschlag):} <++>\\
%\textbf{Auslösende Ereignisse:}
%\begin{enumerate}[nolistsep, label=(\alph*)]
%  \item <++>
%\end{enumerate}
%\textbf{Beschreibung:}
%\begin{enumerate}[nolistsep]
%  \item <++>
%\end{enumerate}
%\textbf{Alternativen:}
%\begin{enumerate}[nolistsep]
%  \item <++>
%\end{enumerate}
